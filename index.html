<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/style.css">

    <script>

        window.addEventListener("load", function () {

            //--------------------------------------------
            //task1

            let tab = function () {

                let tabTitle = document.querySelector(".tab-title");
                let tabBlock = document.querySelector(".tab-block");
                let tabName;

                tabTitle.addEventListener("click", function (e) {
                    let target = e.target;

                    for (let elem of tabTitle.children) {
                        elem.classList.remove("active");
                        elem.style.background = "none";
                    }

                    target.classList.add("active");
                    tabName = target.dataset.color;
                    target.style.backgroundColor = tabName;

                    for (let elem of tabBlock.children) {
                        elem.classList.remove("active");
                        if (elem.classList.contains(tabName))
                            elem.classList.add("active");
                    }
                });
            };

            tab();

            //--------------------------------------------
            // //task2


            let table = document.querySelector("table");

            table.addEventListener("click", function (e) {
                let target = e.target;

                target.matches(".red") ? target.classList.remove('red') : target.classList.add('red');
            })


            //--------------------------------------------
            // //task3

            table.addEventListener("click", (e) => {
                let target = e.target;
                let i = target.parentNode.rowIndex;
                let j = target.cellIndex;
                target.classList.add('red');

                document.addEventListener("keyup", function (e) {

                    target.classList.remove('red')
                    let tr = table.rows.length;
                    let td;

                    for (let row of table.rows) {
                        td = row.cells.length;
                    }

                    if (e.keyCode == '37' && j > 0) {
                        table.rows[i].cells[j].style.background = "";
                        j -= 1;
                        return table.rows[i].cells[j].style.background = "red";

                    } else if (e.keyCode == '38' && i > 0) {
                        table.rows[i].cells[j].style.background = "";
                        i -= 1;
                        return table.rows[i].cells[j].style.background = "red";

                    } else if (e.keyCode == '39' && j < td - 1) {
                        table.rows[i].cells[j].style.background = "";
                        j += 1;
                        return table.rows[i].cells[j].style.background = "red";

                    } else if (e.keyCode == '40' && i < tr - 1) {
                        table.rows[i].cells[j].style.background = "";
                        i += 1;
                        return table.rows[i].cells[j].style.background = "red";
                    }
                })

            })



        });


    </script>

</head>

<body>
    <div class="wrapper">
        <div class="container">
            <div class="tab-title">
                <button class="tab-title_item red active" data-color="red">red</button>
                <button class="tab-title_item" data-color="yellow">yellow</button>
                <button class="tab-title_item" data-color="green">green</button>
            </div>
            <div class="tab-block">
                <div class="tab-block_item red active">
                </div>

                <div class="tab-block_item yellow">
                </div>

                <div class="tab-block_item green">
                </div>

            </div>

        </div>
    </div>

    <table cellspacing="0">
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    </table>
</body>

</html>